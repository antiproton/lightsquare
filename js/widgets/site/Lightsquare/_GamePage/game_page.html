<div class="game">
	<div class="game_main">
		<div class="game_player opponent">
			<div class="player_username">
				{{players.opponent.name}} ({{players.opponent.rating}})
			</div>
			<div class="player_clock {{isInProgress && !viewingActivePlayer ? ('active_clock' + (timeIsCritical(players.opponent.time) ? ' critical_clock' : '')) : ''}}">
				{{getTime(players.opponent.time)}}
			</div>
		</div>
		<div class="game_board_and_controls">
			<div class="game_board" id="board" on-contextmenu="cancel_premove">
				
			</div>
			{{#userIsPlaying}}
				<div class="game_controls">
					{{#isInProgress}}
						<input
							type="button"
							on-click="resign"
							value="Resign"
						>
						<input
							type="button"
							on-click="offer_or_accept_draw"
							value="{{(drawOffered && userIsActivePlayer) ? 'Accept' : 'Offer'}} draw"
							class="{{
								(
									(!drawOffered && !userIsActivePlayer)
									|| (drawOffered && userIsActivePlayer)
								) ? '' : 'disabled'
							}}"
						>
						{{#canClaimDraw}}
							<input type="button" on-click="claim_draw" value="Claim draw">
						{{/canClaimDraw}}
					{{/isInProgress}}
					{{^isInProgress}}
						{{#playerHasOfferedRematch}}
							<input type="button" on-click="cancel_rematch" value="Cancel" class="cancel_rematch">
						{{/playerHasOfferedRematch}}
						{{#opponentHasOfferedRematch}}
							<input type="button" on-click="rematch" value="Rematch" class="rematch rematch_offered">
							<input type="button" on-click="decline_rematch" value="Decline" class="decline_rematch">
						{{/opponentHasOfferedRematch}}
						{{#(!opponentHasOfferedRematch && !playerHasOfferedRematch)}}
							<input type="button" on-click="rematch" value="Rematch" class="rematch">
						{{/neither}}
						<input type="button" on-click="new_game" value="New {{timingDescription}}">
					{{/isInProgress}}
				</div>
			{{/userIsPlaying}}
		</div>
		<div class="game_player player">
			<div>
				{{players.player.name}} ({{players.player.rating}})
			</div>
			<div class="player_clock {{isInProgress && viewingActivePlayer ? ('active_clock' + (timeIsCritical(players.player.time) ? ' critical_clock' : '')) : ''}}">
				{{getTime(players.player.time)}}
			</div>
		</div>
	</div>
	<div class="game_details">
		{{#result}}
			<div class="game_result">
					{{result.summary}}
			</div>
		{{/result}}
		<div class="game_history" id="history">
			
		</div>
		<div class="game_chat" id="chat">
			
		</div>
	</div>
</div>